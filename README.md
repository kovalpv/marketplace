# Приложение на Spring Boot с Gateway, Config Service, Market и Inventory

Набор микросервисов на Spring Boot демонстрирует, как можно получить сквозные traceId и spanId для всего приложения, используя `micrometer-tracing-bridge-otel`.

## Структура приложения

Приложение состоит из следующих компонентов:

- **Gateway**: маршрутизирует запросы к другим сервисам.
- **Config Service**: управляет конфигурацией приложения.
- **Market**: сервис, предоставляющий информацию о товарах.
- **Inventory**: сервис, отвечающий за управление запасами.

## Шаги по созданию приложения

### 1. Запуск приложения

Запустите все сервисы в отдельном терминале при помощи команд.
```bash
cd {APP_ROOT}
make all
```


#### Остановка приложения

Завершите приложение выполнив команду в терминале:
```bash
kill $(ps aux | grep 'spring-boot:run' | grep -v grep | awk '{print $2}') 
```

### 2. Проверка работы

После запуска всех сервисов вы можете проверить трассировку, отправив запрос через Gateway:

```bash
curl http://localhost:8765/api/market/products
```

### 3. Логирование Trace ID и Span ID

В логах каждого сервиса вы увидите `traceId` и `spanId`, автоматически добавленные Micrometer Tracing Bridge Otel.

Пример логов:

```
2024-10-02 12:00:00 INFO  [service-name] traceId=abc123 spanId=xyz456 - Handling request...
```

## Заключение

С помощью этого простого приложения вы можете увидеть, как легко интегрировать трассировку с помощью Micrometer Tracing Bridge Otel в микросервисной архитектуре. Теперь у вас есть возможность отслеживать запросы через все компоненты вашего приложения с помощью `traceId` и `spanId`.